<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/ https://raw.githubusercontent.com/Gethe/wow-ui-source/live/Interface/AddOns/Blizzard_SharedXML/UI.xsd">
    <Include file="statusbar.lua" />

    <StatusBar name="MapPinEnhancedStatusbarTemplate"
        mixin="MapPinEnhancedStatusbarMixin, MapPinEnhancedThemeableMixin" virtual="true">
        <BarTexture atlas="plunderstorm-stormbar-fill" desaturated="true" />

        <Layers>
            <Layer level="OVERLAY">
                <Texture parentKey="left" atlas="plunderstorm-stormbar-BorderLeft"
                    useAtlasSize="true">
                    <Anchors>
                        <Anchor point="LEFT" />
                    </Anchors>
                </Texture>
                <Texture parentKey="right" atlas="plunderstorm-stormbar-BorderRight"
                    useAtlasSize="true">
                    <Anchors>
                        <Anchor point="RIGHT" />
                    </Anchors>
                </Texture>
                <Texture parentKey="middle" atlas="plunderstorm-stormbar-BorderCenter">
                    <Size x="178" />
                    <Anchors>
                        <Anchor point="TOPLEFT" relativeKey="$parent.left" relativePoint="TOPRIGHT" />
                        <Anchor point="BOTTOMLEFT" relativeKey="$parent.left"
                            relativePoint="BOTTOMRIGHT" />
                        <Anchor point="TOPRIGHT" relativeKey="$parent.right"
                            relativePoint="TOPLEFT" />
                        <Anchor point="BOTTOMRIGHT" relativeKey="$parent.right"
                            relativePoint="BOTTOMLEFT" />
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <Scripts>
            <OnSizeChanged>
                -- original left and right texture has a ratio of 1:1
                local height = self:GetHeight()
                self.left:SetSize(height, height)
                self.right:SetSize(height, height)
                self.middle:SetHeight( height)
            </OnSizeChanged>
            <OnUpdate method="OnUpdate" />
        </Scripts>
    </StatusBar>
</Ui>
